
<html>
<head>
  <title>Final Project ECE5995</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
      <script type="text/javascript" src='https://api.mapbox.com/mapbox.js/v3.1.0/mapbox.js'></script>

  <style>
    #map{ height: 100% }
  </style>
</head>
<body>

  <div id="map"></div>

  <script>

 // <p style=" text-align:${textAlign}; margin-top:${text_margin_top}rem; color:${font_color}; font-size:${font_size}px;">${data}${data_suffix}</p>

  var markerStyle = `
      background-color:blue;
      opacity:10%;
      width: .5rem;
      height: .5rem;                        
      left: -.8rem;
      bottom: -.8rem;
      display: block;
      position: relative;
      border-radius:50%;
      `
  


function createIcon() {

  icon = L.divIcon({ 
    className: "my-custom-pin", 
    iconAnchor: [0, 15],
    labelAnchor: [0, 0],
    popupAnchor: [0, 0],
    html: `<span style="${markerStyle}">
                   
               </span>`
  });

  return icon;
}




  // initialize the map


  // load a tile layer
    L.mapbox.accessToken = 'pk.eyJ1IjoibWZkb21haW4iLCJhIjoiY2toeHRhaHQwMG44NzJzdGh4ZHZsY2xuNSJ9.8IxXKXtyoZUHzBQzBPpKSA';
            var mainmap = L.mapbox.styleLayer('mapbox://styles/mapbox/light-v9');
            var map = L.map('map', {  center: { lat: 41.65, lng: -91.53 }, zoomSnap: 0, zoom: 10 })
            map.addLayer(mainmap);

$.getJSON("data.geojson", function(data){

      var geojsonMarkerOptions = {
          radius: 8,
          fillColor: "#ff7800",
          color: "#000",
          weight: 1,
          opacity: 1,
          fillOpacity: 0.8
      };

      L.geoJson(data, {
          pointToLayer: function (feature, latlng) {

              var IR_icon = createIcon();
                
                old_data = false;

                return L.marker(latlng, {
                    icon: icon,
                    riseOnHover: true
                });

          }
      }).addTo(map);
})


  </script>
</body>
</html>
	